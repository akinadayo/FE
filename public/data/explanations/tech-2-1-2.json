{
  "topicId": "tech-2-1-2",
  "title": "メモリ",
  "pages": [
    {
      "id": 1,
      "title": "メモリの分類と種類",
      "sections": [
        {
          "type": "text",
          "content": "コンピュータのメモリは、大きくRAM（Random Access Memory）とROM（Read Only Memory）に分類されます。それぞれ特性と用途が異なります。"
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "RAMとROMの違い",
          "content": "RAMは読み書き可能で高速ですが電源を切るとデータが消える揮発性メモリです。ROMは読み出し専用で電源を切ってもデータが保持される不揮発性メモリです。"
        },
        {
          "type": "table",
          "headers": ["種類", "読み書き", "揮発性", "用途"],
          "rows": [
            ["RAM", "読み書き可能", "揮発性", "主記憶装置、作業領域"],
            ["ROM", "読み出しのみ", "不揮発性", "BIOS、ファームウェア"]
          ]
        },
        {
          "type": "text",
          "content": "RAMにはさらにSRAMとDRAMという2つの主要な種類があります。"
        },
        {
          "type": "table",
          "headers": ["RAM種別", "構成素子", "特徴", "用途"],
          "rows": [
            ["SRAM", "フリップフロップ", "高速、高価、リフレッシュ不要", "キャッシュメモリ"],
            ["DRAM", "コンデンサ", "低速、安価、リフレッシュ必要", "主記憶装置"]
          ]
        },
        {
          "type": "highlight",
          "icon": "⚡",
          "title": "DRAMのリフレッシュ",
          "content": "DRAMはコンデンサに電荷を蓄えてデータを保持するため、時間とともに電荷が放電します。定期的にデータを再書き込み（リフレッシュ）する必要があります。"
        },
        {
          "type": "list",
          "items": [
            "SRAM：高速だが高価なため、容量は小さい（キャッシュに使用）",
            "DRAM：安価で大容量化が可能（主記憶装置に使用）",
            "SDRAM：クロック同期型DRAM、高速データ転送が可能",
            "DDR SDRAM：データ転送速度をさらに高速化したSDRAM"
          ]
        },
        {
          "type": "example",
          "title": "例題：SRAMとDRAM",
          "content": "SRAMとDRAMの説明として適切なものはどれか。\n\nア：SRAMは定期的なリフレッシュが必要である\nイ：DRAMはSRAMより高速である\nウ：SRAMは主にキャッシュメモリに使用される\nエ：DRAMはフリップフロップで構成される",
          "solution": "答え：ウ\n\n解説：SRAMは高速でリフレッシュ不要ですが高価なため、小容量のキャッシュメモリに使用されます。DRAMは安価で大容量化が可能なため主記憶装置に使用されます。"
        }
      ]
    },
    {
      "id": 2,
      "title": "ROMの種類",
      "sections": [
        {
          "type": "text",
          "content": "ROMにも様々な種類があり、書き込み方法や書き換え可能性によって分類されます。用途に応じて適切なROMを選択します。"
        },
        {
          "type": "table",
          "headers": ["ROM種別", "書き換え", "書き換え方法", "用途"],
          "rows": [
            ["マスクROM", "不可", "製造時に書き込み", "大量生産品"],
            ["PROM", "1回のみ", "専用装置で書き込み", "少量生産"],
            ["EPROM", "可能", "紫外線で消去後に書き込み", "開発・試作"],
            ["EEPROM", "可能", "電気的に消去・書き込み", "設定データ保存"],
            ["フラッシュメモリ", "可能", "電気的にブロック単位で消去", "SSD、USBメモリ"]
          ]
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "フラッシュメモリの特徴",
          "content": "EEPROMを発展させた不揮発性メモリで、ブロック単位での高速書き換えが可能です。SSD、USBメモリ、SDカードなど広く使われています。"
        },
        {
          "type": "text",
          "content": "各ROMの詳細な特徴を見てみましょう。"
        },
        {
          "type": "list",
          "items": [
            "マスクROM：製造時にデータを書き込むため、書き換え不可。最も安価",
            "PROM：ユーザーが1回だけ書き込み可能。Programmable ROM",
            "EPROM：紫外線照射で全体を消去可能。Erasable PROM",
            "EEPROM：電気的にバイト単位で書き換え可能。Electrically EPROM",
            "フラッシュメモリ：ブロック単位で高速書き換え。現代の主流"
          ]
        },
        {
          "type": "highlight",
          "icon": "📌",
          "title": "BIOS（ファームウェア）の記憶",
          "content": "コンピュータのBIOSは、以前はEPROMやEEPROMに記憶されていましたが、現在はフラッシュメモリに記憶されることが一般的です。これにより更新が容易になりました。"
        },
        {
          "type": "example",
          "title": "例題：ROM の種類",
          "content": "電気的に内容を消去して書き換えることができ、SSDやUSBメモリに使用されているメモリはどれか。\n\nア：SRAM\nイ：DRAM\nウ：EPROM\nエ：フラッシュメモリ",
          "solution": "答え：エ\n\n解説：フラッシュメモリは電気的に書き換え可能な不揮発性メモリで、SSD、USBメモリ、SDカードなどに広く使用されています。"
        }
      ]
    },
    {
      "id": 3,
      "title": "キャッシュメモリ",
      "sections": [
        {
          "type": "text",
          "content": "キャッシュメモリは、CPUと主記憶装置の速度差を埋めるための高速な記憶装置です。頻繁にアクセスされるデータを一時的に保存します。"
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "キャッシュメモリの役割",
          "content": "CPUの処理速度は非常に高速ですが、主記憶装置（DRAM）は相対的に低速です。キャッシュメモリ（SRAM）を中間に置くことで、平均アクセス時間を短縮します。"
        },
        {
          "type": "table",
          "headers": ["階層", "種類", "容量", "速度", "配置"],
          "rows": [
            ["L1キャッシュ", "SRAM", "数十KB", "最速", "CPUコア内"],
            ["L2キャッシュ", "SRAM", "数百KB", "高速", "CPUチップ内"],
            ["L3キャッシュ", "SRAM", "数MB", "やや高速", "CPU内（共有）"],
            ["主記憶", "DRAM", "数GB", "低速", "マザーボード"]
          ]
        },
        {
          "type": "text",
          "content": "キャッシュメモリの性能は、ヒット率と実効アクセス時間で評価されます。"
        },
        {
          "type": "formula",
          "content": "実効アクセス時間 = ヒット率 × キャッシュアクセス時間 + (1 - ヒット率) × 主記憶アクセス時間",
          "explanation": "ヒット率が高いほど、実効アクセス時間は短くなり、システムの性能が向上します。"
        },
        {
          "type": "list",
          "items": [
            "ヒット：必要なデータがキャッシュにある場合",
            "ミス：必要なデータがキャッシュになく、主記憶からアクセスする場合",
            "ヒット率：全アクセスのうちヒットする割合（通常90%以上）",
            "局所性の原理：最近使ったデータは再度使われやすい"
          ]
        },
        {
          "type": "example",
          "title": "例題：実効アクセス時間",
          "content": "キャッシュメモリのアクセス時間が10ns、主記憶のアクセス時間が100ns、ヒット率が90%の場合、実効アクセス時間は何nsか。",
          "solution": "答え：19ns\n\n解説：\n実効アクセス時間 = 0.9 × 10 + (1 - 0.9) × 100\n                = 9 + 0.1 × 100\n                = 9 + 10 = 19ns"
        },
        {
          "type": "highlight",
          "icon": "⚡",
          "title": "書き込み方式",
          "content": "ライトスルー方式はキャッシュと主記憶の両方に同時書き込み、ライトバック方式はキャッシュのみに書き込み後で主記憶に反映します。"
        }
      ]
    },
    {
      "id": 4,
      "title": "メモリインターリーブ",
      "sections": [
        {
          "type": "text",
          "content": "メモリインターリーブは、主記憶装置を複数のバンクに分割し、並列アクセスすることで高速化を図る技術です。"
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "インターリーブの原理",
          "content": "主記憶を複数のバンク（モジュール）に分割し、連続したアドレスを異なるバンクに割り当てます。複数のアクセスを並行して処理できるため、スループットが向上します。"
        },
        {
          "type": "table",
          "headers": ["方式", "アドレス割り当て", "特徴"],
          "rows": [
            ["2ウェイ", "偶数・奇数でバンク分割", "2倍の高速化"],
            ["4ウェイ", "4つのバンクに分割", "4倍の高速化"],
            ["8ウェイ", "8つのバンクに分割", "8倍の高速化"]
          ]
        },
        {
          "type": "text",
          "content": "メモリインターリーブの具体例を見てみましょう（4ウェイの場合）。"
        },
        {
          "type": "list",
          "items": [
            "アドレス0, 4, 8, 12... → バンク0",
            "アドレス1, 5, 9, 13... → バンク1",
            "アドレス2, 6, 10, 14... → バンク2",
            "アドレス3, 7, 11, 15... → バンク3",
            "連続アクセス時に各バンクが並列動作"
          ]
        },
        {
          "type": "highlight",
          "icon": "⚡",
          "title": "効果的なアクセスパターン",
          "content": "連続したアドレスへのアクセスで最も効果を発揮します。ランダムアクセスの場合は効果が限定的です。"
        },
        {
          "type": "example",
          "title": "例題：メモリインターリーブ",
          "content": "4ウェイインターリーブ方式で、アドレス10番地はどのバンクに配置されるか。\n\nア：バンク0\nイ：バンク1\nウ：バンク2\nエ：バンク3",
          "solution": "答え：ウ\n\n解説：4ウェイインターリーブでは、アドレスを4で割った余りでバンクを決定します。10 ÷ 4 = 2 余り 2 なので、バンク2に配置されます。"
        }
      ]
    },
    {
      "id": 5,
      "title": "キャッシュの書き込み方式と制御",
      "sections": [
        {
          "type": "text",
          "content": "キャッシュメモリへの書き込み時の動作方式には、ライトスルーとライトバックの2つがあります。それぞれ特徴が異なります。"
        },
        {
          "type": "table",
          "headers": ["方式", "書き込み先", "メリット", "デメリット"],
          "rows": [
            ["ライトスルー", "キャッシュと主記憶の両方", "データの一貫性が保たれる", "書き込みが遅い"],
            ["ライトバック", "キャッシュのみ（後で反映）", "書き込みが速い", "制御が複雑"]
          ]
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "ライトスルー方式",
          "content": "CPUからの書き込み時に、キャッシュと主記憶の両方に同時に書き込みます。常にデータの一貫性が保たれますが、主記憶への書き込みが発生するため遅くなります。"
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "ライトバック方式",
          "content": "CPUからの書き込み時は、まずキャッシュのみに書き込みます。キャッシュから追い出される時に主記憶に書き戻します。高速ですが、ダーティビットによる管理が必要です。"
        },
        {
          "type": "text",
          "content": "キャッシュメモリの置換アルゴリズムも重要です。"
        },
        {
          "type": "list",
          "items": [
            "LRU（Least Recently Used）：最も長く使われていないデータを追い出す",
            "FIFO（First In First Out）：最も古く格納されたデータを追い出す",
            "LFU（Least Frequently Used）：最も使用頻度の低いデータを追い出す",
            "ランダム：ランダムにデータを選んで追い出す"
          ]
        },
        {
          "type": "example",
          "title": "例題：キャッシュの書き込み方式",
          "content": "ライトバック方式の説明として適切なものはどれか。\n\nア：キャッシュと主記憶に同時に書き込む\nイ：キャッシュのみに書き込み、後で主記憶に反映する\nウ：主記憶のみに書き込む\nエ：書き込みは常に主記憶を経由する",
          "solution": "答え：イ\n\n解説：ライトバック方式は、まずキャッシュのみに書き込み、そのデータがキャッシュから追い出される際に主記憶に書き戻します。高速ですが、ダーティビットで管理が必要です。"
        },
        {
          "type": "highlight",
          "icon": "📌",
          "title": "試験対策のまとめ",
          "content": "メモリの種類（SRAM、DRAM、ROM各種）、キャッシュメモリの階層と実効アクセス時間の計算、メモリインターリーブ、書き込み方式の違いを理解しましょう。"
        }
      ]
    }
  ]
}
