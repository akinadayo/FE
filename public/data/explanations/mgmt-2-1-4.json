{
  "topicId": "mgmt-2-1-4",
  "title": "システム運用",
  "pages": [
    {
      "id": 1,
      "title": "SLAの定義と重要性",
      "sections": [
        {
          "type": "text",
          "content": "**SLA（Service Level Agreement、サービスレベル契約）**とは、ITサービス提供者と顧客の間で合意される、サービスの品質（サービスレベル）を定めた契約書です。SLAには、①サービスの範囲、②サービスレベル目標（稼働率、応答時間など）、③測定方法、④報告方法、⑤違反時の対応（ペナルティ）、が明記されます。SLAにより、サービス提供者と顧客の期待値が明確になり、トラブルを防ぎ、信頼関係を構築できます。"
        },
        {
          "type": "example",
          "title": "SLAの具体例：クラウドストレージサービス",
          "content": "【サービス提供者】クラウドストレージ事業者A社\n【顧客】中堅企業B社\n\n【SLAの内容】\n①サービスの範囲：\n  - ファイルのアップロード、ダウンロード、共有機能を提供\n  - ストレージ容量1TB、ユーザー数100名まで\n\n②サービスレベル目標：\n  - 稼働率：月間99.9%以上（ダウンタイムは月43分以内）\n  - 応答時間：ファイルアップロード（10MB）は5秒以内\n  - バックアップ：毎日自動バックアップを実施し、過去30日分保持\n\n③測定方法：\n  - 稼働率：A社の監視システムで24時間365日計測\n  - 応答時間：毎時、10MBのテストファイルをアップロードして計測\n\n④報告方法：\n  - 月次レポート：毎月5営業日までに、前月の稼働率、応答時間、障害発生状況をB社に報告\n  - 障害報告：重大障害（サービス停止）が発生した場合、30分以内にB社に電話連絡\n\n⑤違反時の対応（ペナルティ）：\n  - 稼働率が99.9%未満の場合、月額料金の10%を返金\n  - 稼働率が99.0%未満の場合、月額料金の50%を返金\n  - 稼働率が95.0%未満の場合、月額料金の100%を返金し、契約解除権を顧客に付与"
        },
        {
          "type": "table",
          "headers": ["SLAの構成要素", "説明", "具体例"],
          "rows": [
            ["①サービスの範囲", "提供するサービスの内容", "ファイルのアップロード、ダウンロード、共有機能"],
            ["②サービスレベル目標", "サービスの品質目標（数値）", "稼働率99.9%、応答時間5秒以内"],
            ["③測定方法", "サービスレベルをどう測定するか", "監視システムで24時間計測"],
            ["④報告方法", "測定結果をどう報告するか", "月次レポート、障害報告"],
            ["⑤違反時の対応", "目標未達時のペナルティ", "月額料金の10%返金"]
          ]
        },
        {
          "type": "highlight",
          "icon": "💡",
          "title": "SLAの重要性",
          "content": "SLAは、サービス提供者と顧客の「契約」です。SLAがない場合、顧客は「稼働率99.9%と聞いていたのに、実際は95%だった」とクレームを言っても、法的根拠がありません。SLAを締結することで、①サービス提供者は、顧客の期待値を明確に理解し、その水準を維持する責任を負う、②顧客は、サービスが目標を満たさない場合、ペナルティ（返金、契約解除）を受ける権利を得る、③双方の責任範囲が明確になり、トラブルを防げる、というメリットがあります。特に、クラウドサービス、データセンター、ネットワークサービスなど、ITインフラを外部に委託する場合、SLAは必須です。"
        },
        {
          "type": "text",
          "content": "SLAは、通常、**サービスカタログ**（提供するサービスの一覧）とセットで作成されます。サービスカタログには、各サービスの内容、料金、標準SLAが記載され、顧客はカタログから必要なサービスを選択し、個別にSLAを調整（例: 稼働率を99.99%に引き上げ、料金を上乗せ）できます。"
        }
      ]
    },
    {
      "id": 2,
      "title": "SLM（サービスレベル管理）とサービスレベル目標",
      "sections": [
        {
          "type": "text",
          "content": "**SLM（Service Level Management、サービスレベル管理）**とは、SLAで定めたサービスレベル目標を達成するために、サービスの計画、実行、監視、改善を継続的に行う活動です。SLMは、ITILの「サービスデリバリ」プロセスの1つで、①SLAの策定と合意、②サービスレベルの監視と測定、③SLAの遵守状況の報告、④サービスレベルの改善、の4つのステップで構成されます。"
        },
        {
          "type": "table",
          "headers": ["SLMのステップ", "主な活動", "具体例"],
          "rows": [
            ["①SLAの策定と合意", "顧客と協議し、サービスレベル目標を決定", "稼働率99.9%、応答時間5秒以内で合意"],
            ["②サービスレベルの監視と測定", "監視システムで24時間計測", "稼働率、応答時間を毎時計測し、データベースに記録"],
            ["③SLAの遵守状況の報告", "月次レポートで顧客に報告", "前月の稼働率99.95%、応答時間4.2秒と報告"],
            ["④サービスレベルの改善", "目標未達の原因を分析し、改善策を実施", "サーバを増強し、応答時間を3秒に短縮"]
          ]
        },
        {
          "type": "text",
          "content": "**サービスレベル目標（SLO: Service Level Objective）**は、SLAで定める具体的な数値目標です。代表的なSLOには、①**稼働率（Availability）**：システムが正常に動作している時間の割合、②**応答時間（Response Time）**：ユーザーの操作からシステムが応答するまでの時間、③**スループット（Throughput）**：単位時間あたりの処理件数、④**復旧時間（MTTR: Mean Time To Repair）**：障害発生から復旧までの平均時間、があります。"
        },
        {
          "type": "example",
          "title": "サービスレベル目標の具体例：Webシステム",
          "content": "【システム】ECサイト（月間100万PV）\n\n【サービスレベル目標（SLO）】\n①稼働率：\n  - 月間99.9%以上（ダウンタイムは月43分以内）\n  - 計算式：稼働率 = （全時間 - ダウンタイム）/ 全時間 × 100\n  - 例：1ヶ月（30日 = 43,200分）のうち、ダウンタイムが30分の場合、稼働率 = (43,200 - 30) / 43,200 × 100 = 99.93%\n\n②応答時間：\n  - トップページの表示時間：1秒以内（95パーセンタイル）\n  - 商品検索の応答時間：2秒以内（95パーセンタイル）\n  - 注: 95パーセンタイルとは、全アクセスの95%が目標時間以内に応答することを意味します（残り5%は目標を超えてもOK）\n\n③スループット：\n  - 同時アクセス数：1,000ユーザーに対応\n  - 注文処理：1秒あたり100件の注文を処理\n\n④復旧時間（MTTR）：\n  - 障害発生から復旧まで平均2時間以内\n  - 重大障害（全サービス停止）の場合、1時間以内に復旧\n\n⑤バックアップ：\n  - データベースのバックアップを毎日実施\n  - バックアップデータは30日間保持\n  - バックアップからの復元時間は4時間以内"
        },
        {
          "type": "highlight",
          "icon": "📊",
          "title": "稼働率の計算と「ナイン」の意味",
          "content": "稼働率は、「ナイン」で表現されることがあります。①99%（ツーナイン）：年間のダウンタイムは約3.65日、②99.9%（スリーナイン）：年間のダウンタイムは約8.76時間、③99.99%（フォーナイン）：年間のダウンタイムは約52.56分、④99.999%（ファイブナイン）：年間のダウンタイムは約5.26分。クラウドサービス（AWS、Azure、Google Cloud）の標準SLAは、スリーナイン（99.9%）が多いです。金融機関の基幹システムなど、ミッションクリティカルなシステムは、フォーナイン（99.99%）以上が求められます。ファイブナイン（99.999%）を実現するには、冗長化（サーバを複数台用意し、1台が故障しても他のサーバで継続）や自動フェイルオーバー（障害を検知したら自動的に予備サーバに切り替え）が必要です。"
        }
      ]
    },
    {
      "id": 3,
      "title": "サービス品質指標の測定と監視",
      "sections": [
        {
          "type": "text",
          "content": "SLAで定めたサービスレベル目標を達成するためには、サービス品質指標を**継続的に測定・監視**することが重要です。測定方法には、①**監視ツール**（Nagios、Zabbix、Datadog等）を使用し、サーバのCPU使用率、メモリ使用率、ディスク使用率、ネットワーク帯域を24時間監視、②**外形監視**（External Monitoring）：外部からWebサイトにアクセスし、応答時間、HTTPステータスコード（200、404、500等）を監視、③**ログ監視**：アクセスログ、エラーログを解析し、異常を検知、があります。"
        },
        {
          "type": "example",
          "title": "監視ツールの具体例：Webサーバの監視",
          "content": "【監視対象】ECサイトのWebサーバ（Apache、Nginx）\n\n【監視項目と閾値】\n①CPU使用率：\n  - 警告：80%以上が5分間継続\n  - 異常：90%以上が5分間継続\n  - 対応：異常の場合、管理者にメール通知 + SMS送信\n\n②メモリ使用率：\n  - 警告：80%以上\n  - 異常：90%以上\n  - 対応：異常の場合、自動的にサーバを再起動\n\n③ディスク使用率：\n  - 警告：80%以上\n  - 異常：90%以上\n  - 対応：異常の場合、古いログファイルを自動削除\n\n④応答時間（外形監視）：\n  - 正常：トップページの応答時間が1秒以内\n  - 警告：応答時間が2秒以上が3回連続\n  - 異常：応答時間が5秒以上、またはHTTPステータスコードが500（Internal Server Error）\n  - 対応：異常の場合、管理者に即時通知し、自動的に予備サーバに切り替え（フェイルオーバー）\n\n⑤エラーログ監視：\n  - エラーログに「Out of memory」「Database connection failed」などのキーワードが記録されたら、即時通知\n\n【監視頻度】\n- CPU、メモリ、ディスク：1分ごとに計測\n- 応答時間（外形監視）：1分ごとに、外部からトップページにアクセスして計測\n- エラーログ：リアルタイムで監視（新しいログが記録されたら即座にチェック）"
        },
        {
          "type": "table",
          "headers": ["測定指標", "計算式/測定方法", "目標値の例"],
          "rows": [
            ["稼働率", "(全時間 - ダウンタイム) / 全時間 × 100", "月間99.9%以上"],
            ["応答時間", "外部から定期的にアクセスして計測（95パーセンタイル）", "1秒以内（95%）"],
            ["スループット", "単位時間あたりの処理件数（例: 1秒あたりのリクエスト数）", "1,000 req/sec"],
            ["MTBF（平均故障間隔）", "（稼働時間の合計）/（故障回数）", "720時間（30日）"],
            ["MTTR（平均修理時間）", "（修理時間の合計）/（故障回数）", "2時間以内"],
            ["CPU使用率", "監視ツールで1分ごとに計測", "平均50%以下、最大80%以下"],
            ["エラー率", "（エラー件数）/（総リクエスト数）× 100", "0.1%以下"]
          ]
        },
        {
          "type": "highlight",
          "icon": "🔍",
          "title": "外形監視の重要性",
          "content": "サーバの監視だけでは不十分です。サーバのCPU使用率が正常でも、ネットワークの問題でユーザーがアクセスできない場合があります。**外形監視**は、外部（インターネット）から実際にWebサイトにアクセスし、ユーザー視点で応答時間やエラーの有無を確認します。外形監視により、①ネットワーク障害の検知、②DNSの問題の検知、③ファイアウォールの設定ミスの検知、④実際のユーザー体験（UX）の測定、が可能になります。主要なクラウド監視サービス（Datadog、New Relic、Pingdom）は、外形監視機能を提供しています。"
        },
        {
          "type": "text",
          "content": "測定データは、**ダッシュボード**（グラフで可視化）と**レポート**（月次、週次）で管理者と顧客に共有されます。ダッシュボードでは、リアルタイムでサーバの状態を確認でき、異常を即座に発見できます。レポートでは、過去のデータを分析し、傾向（例: 毎週月曜日の10時にCPU使用率が上昇）を把握し、改善策を検討します。"
        }
      ]
    },
    {
      "id": 4,
      "title": "SLA違反時の対応とペナルティ条項",
      "sections": [
        {
          "type": "text",
          "content": "SLAで定めたサービスレベル目標を達成できなかった場合（**SLA違反**）、サービス提供者は顧客に対して**ペナルティ**（違約金、返金、補償）を支払います。ペナルティ条項は、SLAで明確に定められ、①違反の判定基準（例: 稼働率が99.9%未満）、②ペナルティの内容（例: 月額料金の10%返金）、③ペナルティの上限（例: 月額料金の100%まで）、が記載されます。ペナルティにより、サービス提供者は目標達成へのインセンティブを持ち、顧客は損害の補償を受けられます。"
        },
        {
          "type": "example",
          "title": "ペナルティ条項の具体例：クラウドサーバサービス",
          "content": "【サービス】クラウドサーバサービス（IaaS）\n【月額料金】100,000円\n【SLA】稼働率99.9%以上\n\n【ペナルティ条項】\n①稼働率99.9%未満99.5%以上の場合：\n  - ペナルティ：月額料金の10%（10,000円）を返金\n  - 例：稼働率99.8%の場合、10,000円返金\n\n②稼働率99.5%未満99.0%以上の場合：\n  - ペナルティ：月額料金の25%（25,000円）を返金\n  - 例：稼働率99.2%の場合、25,000円返金\n\n③稼働率99.0%未満95.0%以上の場合：\n  - ペナルティ：月額料金の50%（50,000円）を返金\n  - 例：稼働率98.5%の場合、50,000円返金\n\n④稼働率95.0%未満の場合：\n  - ペナルティ：月額料金の100%（100,000円）を返金\n  - 顧客に契約解除権を付与（即時解約可能、違約金なし）\n  - 例：稼働率90.0%の場合、100,000円返金 + 契約解除可能\n\n【ペナルティの上限】\n- 1ヶ月のペナルティ総額は、月額料金の100%（100,000円）まで\n- 複数の違反があっても、返金額は100,000円を超えない\n\n【ペナルティの請求方法】\n- 顧客は、月次レポート受領後30日以内に、書面でペナルティを請求\n- サービス提供者は、請求受領後30日以内に返金\n\n【免責事項（Force Majeure）】\n以下の場合、SLA違反でもペナルティは発生しない：\n①天災（地震、台風、洪水）による障害\n②テロ、戦争、暴動による障害\n③顧客の過失（設定ミス、過度な負荷）による障害\n④第三者（インターネットプロバイダ、電力会社）の障害"
        },
        {
          "type": "table",
          "headers": ["稼働率", "ダウンタイム（月）", "ペナルティ（返金率）"],
          "rows": [
            ["99.9%以上", "43分以内", "なし"],
            ["99.9%未満99.5%以上", "43分超216分以内", "月額料金の10%"],
            ["99.5%未満99.0%以上", "216分超432分以内", "月額料金の25%"],
            ["99.0%未満95.0%以上", "432分超2,160分以内", "月額料金の50%"],
            ["95.0%未満", "2,160分超（36時間超）", "月額料金の100% + 契約解除権"]
          ]
        },
        {
          "type": "highlight",
          "icon": "⚠️",
          "title": "ペナルティと損害賠償の違い",
          "content": "ペナルティ（返金）と損害賠償は異なります。①**ペナルティ**：SLAで予め定められた返金額（例: 月額料金の10%）。迅速に支払われ、顧客の手続きが簡単。②**損害賠償**：SLA違反により顧客が実際に被った損害（例: システム停止により売上が1,000万円減少）を賠償。顧客は、損害の因果関係を証明する必要があり、時間と費用がかかる。多くのSLAでは、「ペナルティの支払いをもって、サービス提供者の責任は免除され、損害賠償請求はできない」という条項（**責任制限条項**）が含まれています。つまり、ペナルティを受け取ったら、それ以上の損害賠償は請求できません。ただし、サービス提供者の故意または重過失（例: 意図的にサーバを停止）の場合、責任制限条項は無効となり、損害賠償請求が可能です。"
        },
        {
          "type": "text",
          "content": "**SLA違反の対応プロセス**：①障害発生 → 監視システムが検知、②管理者に通知 → 即座に原因調査と復旧作業、③復旧完了 → 顧客に報告（障害報告書）、④月次レポート作成 → 稼働率を計算、SLA違反を判定、⑤SLA違反の場合 → ペナルティを算出、顧客に報告、⑥顧客がペナルティを請求 → 返金手続き、⑦原因分析 → 再発防止策を実施（例: サーバ増強、監視強化）。"
        }
      ]
    },
    {
      "id": 5,
      "title": "システム運用管理とSLAの統合",
      "sections": [
        {
          "type": "text",
          "content": "システム運用管理（Operation Management）は、SLAで定めたサービスレベル目標を達成するための日常的な活動です。運用管理には、①**バックアップ管理**：データの定期的なバックアップと復元テスト、②**監視管理**：サーバ、ネットワーク、アプリケーションの監視、③**ジョブ管理**：バッチ処理の自動実行とスケジューリング、④**インシデント管理**：障害発生時の対応と復旧、⑤**変更管理**：システム変更のリスク評価と承認、⑥**ファシリティマネジメント**：データセンターの電源、空調、セキュリティ管理、が含まれます。これらの活動は、ITILフレームワークに基づいて標準化されています。"
        },
        {
          "type": "table",
          "headers": ["運用管理項目", "目的", "SLAとの関連", "具体例"],
          "rows": [
            ["バックアップ管理", "データ損失を防ぎ、復旧可能性を確保", "SLAで「毎日バックアップ、30日保持」を規定", "毎日深夜2時に自動バックアップ実行"],
            ["監視管理", "障害を早期発見し、ダウンタイムを最小化", "SLAで「稼働率99.9%」を達成するために24時間監視", "CPU使用率が80%超で警告、90%超で自動対応"],
            ["ジョブ管理", "定期的な処理を自動化し、人的ミスを防ぐ", "SLAで「月次レポートを毎月5営業日までに提出」を遵守", "月次集計バッチを毎月1日深夜に自動実行"],
            ["インシデント管理", "障害を迅速に復旧し、影響を最小化", "SLAで「MTTR 2時間以内」を達成", "障害検知後、30分以内に顧客に連絡、2時間以内に復旧"],
            ["変更管理", "システム変更のリスクを管理し、障害を防ぐ", "SLAで「計画停止は月1回、2時間以内」を規定", "変更申請→承認→テスト環境で検証→本番環境に適用"],
            ["ファシリティマネジメント", "データセンターの安定稼働を確保", "SLAで「稼働率99.9%」を支える物理的基盤", "UPS（無停電電源装置）、二重化空調、入退室管理"]
          ]
        },
        {
          "type": "example",
          "title": "バックアップ管理の具体例：3つのバックアップ方式",
          "content": "【バックアップ方式】\nバックアップには、①フルバックアップ、②差分バックアップ、③増分バックアップ、の3種類があります。\n\n①**フルバックアップ（Full Backup）**：\n  - 全てのデータをバックアップ\n  - 復元が簡単（1回のバックアップデータだけで復元可能）\n  - バックアップ時間が長い、ストレージ容量が多く必要\n  - 例：日曜日にフルバックアップ（データ量100GB、バックアップ時間5時間）\n\n②**差分バックアップ（Differential Backup）**：\n  - 前回のフルバックアップ以降に変更されたデータのみバックアップ\n  - 復元には、フルバックアップ + 最新の差分バックアップの2つが必要\n  - フルバックアップより時間が短い\n  - 例：月～土曜日に差分バックアップ（月曜10GB、火曜20GB、水曜30GB…土曜60GB）\n\n③**増分バックアップ（Incremental Backup）**：\n  - 前回のバックアップ（フルまたは増分）以降に変更されたデータのみバックアップ\n  - 復元には、フルバックアップ + 全ての増分バックアップが必要\n  - 最もバックアップ時間が短い、ストレージ容量が最小\n  - 例：月～土曜日に増分バックアップ（月曜10GB、火曜10GB、水曜10GB…土曜10GB）\n\n【バックアップスケジュールの例】\n- 日曜日：フルバックアップ（100GB、5時間）\n- 月～土曜日：増分バックアップ（各10GB、各30分）\n- 復元方法：日曜日のフルバックアップ + 月～金曜日の増分バックアップを順番に復元\n\n【3-2-1ルール（バックアップのベストプラクティス）】\n①3つのコピー：本番データ + バックアップ2つ\n②2種類のメディア：ローカルディスク + クラウドストレージ\n③1つはオフサイト：別の場所（別のデータセンター、クラウド）に保管\n→ 火災、地震などの災害でデータセンターが全損しても、オフサイトのバックアップから復元可能"
        },
        {
          "type": "highlight",
          "icon": "📌",
          "title": "SLAとITILの関係",
          "content": "ITIL（IT Infrastructure Library）は、ITサービスマネジメントのベストプラクティス集で、サービスの計画、設計、運用、改善のプロセスを定義しています。SLAは、ITILの「サービスデリバリ」プロセスの中核です。ITILでは、①SLA（顧客と合意）、②OLA（Operational Level Agreement、内部部門間の合意、例: ITサービス部門とネットワーク部門）、③UC（Underpinning Contract、外部ベンダーとの契約、例: クラウド事業者とのSLA）、の3層構造でサービスレベルを管理します。例：顧客とのSLAで「稼働率99.9%」を約束した場合、内部のOLAで「ネットワーク部門は稼働率99.95%を維持」、外部のUCで「クラウド事業者は稼働率99.99%を保証」と定め、全体で99.9%を達成します。"
        },
        {
          "type": "text",
          "content": "**継続的改善（CSI: Continual Service Improvement）**：SLAは、一度策定したら終わりではありません。サービスレベルの実績を定期的にレビューし、①目標未達の原因を分析、②改善策を実施（例: サーバ増強、監視強化）、③SLAの見直し（例: 顧客の要望に応じて、稼働率を99.99%に引き上げ）、を継続的に行います。これを**PDCAサイクル**（Plan-Do-Check-Act）で回すことで、サービス品質が向上します。"
        }
      ]
    }
  ]
}
