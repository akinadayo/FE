{
  "topicId": "tech-3-4-3",
  "title": "通信プロトコル",
  "questions": [
    {
      "id": "tech-3-4-3-q1",
      "type": "multiple_choice",
      "question": "TCP/IPの4階層モデルにおいて、「ネットワーク間のデータ配送（ルーティング）を担当し、IPアドレスでパケットを転送する階層」はどれですか？",
      "options": [
        "アプリケーション層",
        "トランスポート層",
        "インターネット層",
        "ネットワークインターフェース層"
      ],
      "correctAnswer": 2,
      "explanation": "「インターネット層」が正しいです。TCP/IPの4階層モデルは、①アプリケーション層（HTTP、HTTPS、FTP、SMTP、POP3、DNS等のアプリケーションごとの通信サービス）、②トランスポート層（TCP、UDP等のデータの信頼性確保とポート番号による識別）、③インターネット層（IP、ARP、ICMP等のネットワーク間のデータ配送とルーティング）、④ネットワークインターフェース層（イーサネット、Wi-Fi等の物理的なデータ送受信）、で構成されます。インターネット層は、IPパケットに送信元IPアドレスと宛先IPアドレスを付加し、ルータがパケットを宛先ネットワークまで転送する経路選択（ルーティング）を行います。例えば、あなたのPC（192.168.1.10）からWebサーバ（203.0.113.5）にアクセスする際、インターネット層がIPパケットをルータ経由で宛先まで配送します。選択肢①アプリケーション層はHTTP、DNS等のアプリケーションプロトコル、②トランスポート層はTCP、UDP等のエンドツーエンド通信、④ネットワークインターフェース層は物理的なデータ伝送を担当します。"
    },
    {
      "id": "tech-3-4-3-q2",
      "type": "multiple_choice",
      "question": "TCPとUDPの説明として、正しいものはどれですか？",
      "options": [
        "TCPはコネクションレス型で、UDPはコネクション型のプロトコルである",
        "TCPは信頼性が高く速度が遅い、UDPは速度が速いが信頼性が低い",
        "TCPは動画配信に適しており、UDPはWebブラウジングに適している",
        "TCPはデータグラムを使用し、UDPはセグメントを使用する"
      ],
      "correctAnswer": 1,
      "explanation": "「TCPは信頼性が高く速度が遅い、UDPは速度が速いが信頼性が低い」が正しいです。TCP（Transmission Control Protocol）は、コネクション型のプロトコルで、通信前に3ウェイハンドシェイク（SYN → SYN-ACK → ACK）で接続を確立します。データの到達保証、順序保証、再送制御、フロー制御、輻輳制御などの機能により、データが欠落・重複・順序違いなく確実に届きますが、確認応答や再送のオーバーヘッドがあるため速度が遅くなります。TCP用途: Webアクセス（HTTP/HTTPS）、メール（SMTP、POP3、IMAP）、ファイル転送（FTP）。UDP（User Datagram Protocol）は、コネクションレス型のプロトコルで、接続確立なしで即座にデータを送信します。データの到達保証、順序保証、再送機能がないため信頼性が低いですが、オーバーヘッドが少ないため速度が速いです。UDP用途: 動画配信（YouTube、Netflix）、VoIP（IP電話）、オンラインゲーム、DNS問い合わせ。選択肢①は逆、③はTCPがWebブラウジング、UDPが動画配信、④はTCPがセグメント、UDPがデータグラムを使用します。"
    },
    {
      "id": "tech-3-4-3-q3",
      "type": "multiple_choice",
      "question": "TCPの3ウェイハンドシェイクの流れとして、正しいものはどれですか？",
      "options": [
        "①クライアント→サーバ: SYN → ②サーバ→クライアント: ACK → ③クライアント→サーバ: SYN-ACK",
        "①クライアント→サーバ: SYN → ②サーバ→クライアント: SYN-ACK → ③クライアント→サーバ: ACK",
        "①クライアント→サーバ: ACK → ②サーバ→クライアント: SYN → ③クライアント→サーバ: SYN-ACK",
        "①クライアント→サーバ: SYN-ACK → ②サーバ→クライアント: SYN → ③クライアント→サーバ: ACK"
      ],
      "correctAnswer": 1,
      "explanation": "「①クライアント→サーバ: SYN → ②サーバ→クライアント: SYN-ACK → ③クライアント→サーバ: ACK」が正しいです。TCPの3ウェイハンドシェイクは、TCPで接続を確立するための手順で、以下の3ステップで構成されます。①SYN（同期）: クライアントがサーバに「接続したい」という意思表示を送信（SYNフラグ=1、シーケンス番号=1000）。②SYN-ACK（同期-確認応答）: サーバがクライアントに「接続を受け入れます」という応答を送信（SYNフラグ=1、ACKフラグ=1、シーケンス番号=2000、確認応答番号=1001）。③ACK（確認応答）: クライアントがサーバに「確認しました」という通知を送信（ACKフラグ=1、確認応答番号=2001）。3ステップで接続が確立され、データの送受信が開始されます。なぜ3回必要かというと、2回では、サーバの接続受け入れをクライアントが確認できません。3回にすることで、双方が「接続OK」を確認でき、信頼性のある通信が可能になります。データ送信後は、4ウェイハンドシェイク（FIN → ACK → FIN → ACK）で接続を終了します。選択肢①③④は順序が間違っています。"
    },
    {
      "id": "tech-3-4-3-q4",
      "type": "multiple_choice",
      "question": "次のポート番号とプロトコルの組み合わせとして、正しいものはどれですか？",
      "options": [
        "HTTP: 80番、HTTPS: 443番、DNS: 53番、SMTP: 25番",
        "HTTP: 443番、HTTPS: 80番、DNS: 53番、SMTP: 25番",
        "HTTP: 80番、HTTPS: 443番、DNS: 25番、SMTP: 53番",
        "HTTP: 80番、HTTPS: 22番、DNS: 53番、SMTP: 443番"
      ],
      "correctAnswer": 0,
      "explanation": "「HTTP: 80番、HTTPS: 443番、DNS: 53番、SMTP: 25番」が正しいです。ポート番号は、1台のコンピュータ上で複数のアプリケーションを識別するための番号（0～65535の16ビット整数）です。代表的なポート番号（well-knownポート番号、0～1023番）は、①HTTP: 80番、②HTTPS: 443番、③FTP（データ）: 20番、FTP（制御）: 21番、④SMTP: 25番（または587番: サブミッションポート）、⑤POP3: 110番、⑥IMAP: 143番、⑦DNS: 53番、⑧DHCP（サーバ）: 67番、DHCP（クライアント）: 68番、⑨SSH: 22番、⑩Telnet: 23番、などです。暗号化版のポート番号は、HTTPS: 443番、SMTPS: 465番、POP3S: 995番、IMAPS: 993番、SSH: 22番（SSH自体が暗号化）、です。覚え方として、暗号化版は元のポート番号より大きい番号が割り当てられることが多いです（HTTP 80 → HTTPS 443、POP3 110 → POP3S 995）。通信は「IPアドレス + ポート番号」のペア（ソケット）で識別されます。選択肢②③④は組み合わせが間違っています。"
    },
    {
      "id": "tech-3-4-3-q5",
      "type": "multiple_choice",
      "question": "IPv4アドレス「192.168.1.100」、サブネットマスク「255.255.255.0」のネットワークにおいて、ネットワークアドレスとブロードキャストアドレスの組み合わせとして、正しいものはどれですか？",
      "options": [
        "ネットワークアドレス: 192.168.1.0、ブロードキャストアドレス: 192.168.1.255",
        "ネットワークアドレス: 192.168.1.1、ブロードキャストアドレス: 192.168.1.254",
        "ネットワークアドレス: 192.168.0.0、ブロードキャストアドレス: 192.168.255.255",
        "ネットワークアドレス: 192.168.1.100、ブロードキャストアドレス: 192.168.1.100"
      ],
      "correctAnswer": 0,
      "explanation": "「ネットワークアドレス: 192.168.1.0、ブロードキャストアドレス: 192.168.1.255」が正しいです。IPv4アドレスは、ネットワーク部（どのネットワークに属するか）とホスト部（ネットワーク内のどの機器か）に分かれます。サブネットマスク255.255.255.0は、ネットワーク部が24ビット（11111111.11111111.11111111）、ホスト部が8ビット（00000000）を意味します。ネットワークアドレスは、ホスト部を全て0にしたもので、192.168.1.0です。ブロードキャストアドレスは、ホスト部を全て1にしたもので、192.168.1.255です。このネットワークで使用可能なホスト数は、ホスト部が8ビットなので2^8 = 256個ですが、ネットワークアドレス（192.168.1.0）とブロードキャストアドレス（192.168.1.255）は使えないため、実際に使えるのは254個（192.168.1.1～192.168.1.254）です。CIDR表記では192.168.1.0/24と表記します（/24はネットワーク部が24ビット）。選択肢②は使用可能なホスト範囲だがアドレスではない、③はサブネットマスク255.255.0.0の場合、④は誤りです。"
    },
    {
      "id": "tech-3-4-3-q6",
      "type": "multiple_choice",
      "question": "プライベートアドレスの範囲として、正しいものはどれですか？",
      "options": [
        "10.0.0.0～10.255.255.255、172.16.0.0～172.31.255.255、192.168.0.0～192.168.255.255",
        "10.0.0.0～10.255.255.255、172.0.0.0～172.255.255.255、192.0.0.0～192.255.255.255",
        "192.0.0.0～192.255.255.255、203.0.0.0～203.255.255.255",
        "127.0.0.0～127.255.255.255、169.254.0.0～169.254.255.255"
      ],
      "correctAnswer": 0,
      "explanation": "「10.0.0.0～10.255.255.255、172.16.0.0～172.31.255.255、192.168.0.0～192.168.255.255」が正しいです。IPv4アドレスは、プライベートアドレス（Private IP Address）とグローバルアドレス（Global IP Address）の2種類に分類されます。プライベートアドレスは、組織内のネットワーク（LAN）で使用され、インターネットには直接接続できません。プライベートアドレスの範囲は、RFC 1918で定義されており、①10.0.0.0～10.255.255.255（/8、クラスA、約1677万個）、②172.16.0.0～172.31.255.255（/12、クラスB、約104万個）、③192.168.0.0～192.168.255.255（/16、クラスC、約6.5万個）、の3つです。これらのアドレスは、同じアドレスを複数の組織で使用できます（インターネットには接続しないため重複しても問題ない）。プライベートアドレスを使う機器がインターネットに接続する際は、ルータがNAT（Network Address Translation）で、プライベートアドレスをグローバルアドレスに変換します。グローバルアドレスは、インターネット上で一意に識別される、世界中で使えるアドレスです。選択肢②③④は範囲が間違っています（④の127.0.0.0/8はループバックアドレス、169.254.0.0/16はリンクローカルアドレス）。"
    },
    {
      "id": "tech-3-4-3-q7",
      "type": "multiple_choice",
      "question": "IPv4とIPv6の説明として、正しいものはどれですか？",
      "options": [
        "IPv4は128ビット、IPv6は32ビットのアドレス長である",
        "IPv4は約43億個、IPv6は約340澗個のアドレスがある",
        "IPv4は16進数のコロン区切り、IPv6は10進数のドット区切りで表記する",
        "IPv4は枯渇問題がなく、IPv6は枯渇が進行中である"
      ],
      "correctAnswer": 1,
      "explanation": "「IPv4は約43億個、IPv6は約340澗個のアドレスがある」が正しいです。IPv4（Internet Protocol version 4）は、32ビット（4バイト）のアドレス長で、10進数のドット区切りで表記します（例: 192.168.1.1）。アドレス総数は2^32 = 約43億個（4,294,967,296個）で、2011年にアジア太平洋地域で枯渇しました。IPv6（Internet Protocol version 6）は、IPv4アドレスの枯渇問題を解決するために開発され、128ビット（16バイト）のアドレス長で、16進数のコロン区切りで表記します（例: 2001:0db8:0000:0000:0000:ff00:0042:8329、連続する0は省略可能: 2001:db8::ff00:42:8329）。アドレス総数は2^128 = 約340澗個（340兆の1兆倍の1兆倍）で、事実上無限です。IPv6の特徴とメリットは、①アドレス数が豊富、②ヘッダが簡素化され処理が高速、③セキュリティ機能（IPsec）が標準装備、④自動アドレス設定（SLAAC）が可能、などです。現在、IPv4とIPv6が共存しており、デュアルスタック（両方をサポート）やトンネリング（IPv6パケットをIPv4パケットにカプセル化）で移行が進められています。選択肢①③④は逆または誤りです。"
    },
    {
      "id": "tech-3-4-3-q8",
      "type": "multiple_choice",
      "question": "DNS（Domain Name System）の名前解決の流れとして、正しいものはどれですか？（www.example.comのIPアドレスを調べる場合）",
      "options": [
        "クライアント → 権威DNSサーバ → TLD DNSサーバ → ルートDNSサーバ → キャッシュDNSサーバ",
        "クライアント → キャッシュDNSサーバ → TLD DNSサーバ → ルートDNSサーバ → 権威DNSサーバ",
        "クライアント → キャッシュDNSサーバ → ルートDNSサーバ → TLD DNSサーバ → 権威DNSサーバ",
        "クライアント → ルートDNSサーバ → キャッシュDNSサーバ → TLD DNSサーバ → 権威DNSサーバ"
      ],
      "correctAnswer": 2,
      "explanation": "「クライアント → キャッシュDNSサーバ → ルートDNSサーバ → TLD DNSサーバ → 権威DNSサーバ」が正しいです。DNS（Domain Name System）は、ドメイン名（例: www.example.com）をIPアドレス（例: 203.0.113.5）に変換するシステムです。DNS名前解決の流れ（再帰的問い合わせ）は、①クライアント → キャッシュDNSサーバ（リゾルバ）: 「www.example.comのIPアドレスは？」（UDP、ポート53）、②キャッシュDNSサーバは、自分のキャッシュ（過去の名前解決結果を一時保存）を確認。キャッシュになければ、③キャッシュDNSサーバ → ルートDNSサーバ（世界に13組、A～M）: 「www.example.comのIPアドレスは？」→ ルートDNSサーバ: 「.comのTLD DNSサーバに聞いてください」、④キャッシュDNSサーバ → TLD DNSサーバ（.com）: 「www.example.comのIPアドレスは？」→ TLD DNSサーバ: 「example.comの権威DNSサーバに聞いてください」、⑤キャッシュDNSサーバ → 権威DNSサーバ（example.com）: 「www.example.comのIPアドレスは？」→ 権威DNSサーバ: 「203.0.113.5です」、⑥キャッシュDNSサーバ → クライアント: 「203.0.113.5です」（キャッシュに保存）、という流れです。DNSキャッシュの有効期間はTTL（Time To Live）で指定されます。選択肢①②④は順序が間違っています。"
    },
    {
      "id": "tech-3-4-3-q9",
      "type": "multiple_choice",
      "question": "DNSレコードの説明として、正しいものはどれですか？",
      "options": [
        "Aレコードは、ドメイン名をIPv6アドレスに変換する",
        "AAAAレコードは、ドメイン名をIPv4アドレスに変換する",
        "MXレコードは、メールサーバのドメイン名と優先度を指定する",
        "CNAMEレコードは、IPアドレスをドメイン名に変換する（逆引き）"
      ],
      "correctAnswer": 2,
      "explanation": "「MXレコードは、メールサーバのドメイン名と優先度を指定する」が正しいです。DNSサーバは、ドメイン名とIPアドレスの対応関係をDNSレコードとして保存します。主なDNSレコードは、①Aレコード（Address Record）: ドメイン名 → IPv4アドレス（例: www.example.com → 203.0.113.5）、②AAAAレコード（AAAA Record）: ドメイン名 → IPv6アドレス（例: www.example.com → 2001:db8::1）、③MXレコード（Mail Exchange Record）: メールサーバのドメイン名と優先度（例: example.com → mail.example.com（優先度: 10））、④CNAMEレコード（Canonical Name Record）: ドメイン名の別名（エイリアス）（例: blog.example.com → www.example.com）、⑤NSレコード（Name Server Record）: 権威DNSサーバのドメイン名（例: example.com → ns1.example.com）、⑥PTRレコード（Pointer Record）: IPアドレス → ドメイン名（逆引き用）（例: 203.0.113.5 → www.example.com）、です。正引きは、ドメイン名 → IPアドレス（Aレコード、AAAAレコード）、逆引きは、IPアドレス → ドメイン名（PTRレコード）です。選択肢①②はAレコードとAAAAレコードが逆、④はPTRレコードの説明です。"
    },
    {
      "id": "tech-3-4-3-q10",
      "type": "multiple_choice",
      "question": "DHCP（Dynamic Host Configuration Protocol）の動作として、正しいものはどれですか？",
      "options": [
        "①DHCP Offer → ②DHCP Discover → ③DHCP ACK → ④DHCP Request",
        "①DHCP Discover → ②DHCP Offer → ③DHCP Request → ④DHCP ACK",
        "①DHCP Request → ②DHCP Discover → ③DHCP Offer → ④DHCP ACK",
        "①DHCP ACK → ②DHCP Offer → ③DHCP Request → ④DHCP Discover"
      ],
      "correctAnswer": 1,
      "explanation": "「①DHCP Discover → ②DHCP Offer → ③DHCP Request → ④DHCP ACK」が正しいです。DHCP（Dynamic Host Configuration Protocol）は、ネットワークに接続したコンピュータに、IPアドレスを自動で割り当てるプロトコルです。DHCPの動作は、4つのメッセージで構成されます。①DHCP Discover（発見）: クライアントがブロードキャスト（255.255.255.255）で「DHCPサーバはいますか？」と問い合わせ（UDP、送信元ポート68、宛先ポート67）。②DHCP Offer（提供）: DHCPサーバがクライアントに「IPアドレス192.168.1.100を提供します」と提案（サブネットマスク、デフォルトゲートウェイ、DNSサーバ、リース期間も含む）。③DHCP Request（要求）: クライアントがDHCPサーバに「IPアドレス192.168.1.100を使いたいです」と要求。④DHCP ACK（確認応答）: DHCPサーバがクライアントに「IPアドレス192.168.1.100を割り当てました」と承認。これでクライアントのIPアドレスが192.168.1.100に設定されます。DHCPで割り当てられる情報は、IPアドレス、サブネットマスク、デフォルトゲートウェイ、DNSサーバのIPアドレス、リース期間（例: 86400秒=24時間）です。DHCPのメリットは、①IPアドレスの手動設定が不要、②IPアドレスの重複を防ぐ、③ネットワーク設定を一元管理、です。選択肢①③④は順序が間違っています。"
    }
  ]
}
